import{e,D as a,q as s,d as t,M as r,r as l,a as d,y as o,p as n,Q as i,U as c,j as u,u as m,G as p,t as g,s as v,P as x,f as b}from"./vendor-BByfD4fc.js";import{u as y}from"./index-cNKlOYmM.js";import{useAppStore as f}from"./app-Wcxyh3f8.js";import{r as h,a as k}from"./EyeIcon-iFm-iff6.js";import{r as w}from"./ExclamationTriangleIcon-CMg3JLn_.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./utils-Bp8ce8Co.js";function _(t,r){return a(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}const S={class:"mt-1 relative"},M=["type","disabled"],I=["disabled"],L={key:0,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-3"},E={class:"flex"},P={class:"ml-3"},A={class:"text-sm text-red-800 dark:text-red-200"},B=["disabled"],D={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},G=j(t({__name:"LoginForm",setup(t){const x=y(),b=f(),j=r(),G=l(""),U=l(!1),q=l(!1),C=l(""),N=()=>{U.value=!U.value};d(()=>x.isAuthenticated,(e,a)=>{e&&j.push("/dashboard").then(()=>{}).catch(e=>{console.error("[LOGIN DEBUG] Router.push failed:",e)})},{immediate:!1});const V=async()=>{if(G.value.trim()){q.value=!0,C.value="";try{const e=await x.login(G.value);e.success?b.addNotification({type:"success",title:"Welcome!",message:"Successfully signed in to your dashboard"}):(C.value=e.error||"Login failed. Please check your password.",G.value="")}catch(e){console.error("Login exception:",e),C.value=e.message||"Login failed. Please check your password.",G.value=""}finally{q.value=!1}}};return(t,r)=>(a(),e("form",{onSubmit:o(V,["prevent"]),class:"space-y-6"},[s("div",null,[r[1]||(r[1]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Admin Password ",-1)),s("div",S,[i(s("input",{id:"password","onUpdate:modelValue":r[0]||(r[0]=e=>G.value=e),type:U.value?"text":"password",required:"",class:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"Enter your admin password",disabled:q.value},null,8,M),[[c,G.value]]),s("button",{type:"button",onClick:N,class:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:q.value},[U.value?(a(),u(m(k),{key:1,class:"h-5 w-5 text-gray-400"})):(a(),u(m(h),{key:0,class:"h-5 w-5 text-gray-400"}))],8,I)])]),C.value?(a(),e("div",L,[s("div",E,[p(m(w),{class:"h-5 w-5 text-red-400"}),s("div",P,[s("p",A,g(C.value),1)])])])):n("",!0),s("div",null,[s("button",{type:"submit",disabled:q.value||!G.value.trim(),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[q.value?(a(),e("span",D,r[2]||(r[2]=[s("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1)]))):(a(),u(m(_),{key:1,class:"absolute left-0 inset-y-0 flex items-center pl-3 h-5 w-5 text-indigo-500 group-hover:text-indigo-400"})),v(" "+g(q.value?"Signing in...":"Sign in"),1)],8,B)])],32))}}),[["__scopeId","data-v-d462e67e"]]),U={class:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6"},q={class:"text-center"},C={class:"flex items-center justify-center space-x-4"},N={class:"flex items-center space-x-2"},V={class:"flex items-center space-x-2"},F={class:"flex items-center space-x-2"},H=t({__name:"SystemStatus",setup(t){const r=l({backend:!1,database:!1,mlModel:!1}),d=async()=>{try{const e="http://localhost:5002",a=await fetch(`${e}/health`);if(a.ok){const e=await a.json();r.value={backend:!0,database:"connected"===e.database_status||!0,mlModel:e.model_loaded||!1}}else r.value={backend:!1,database:!1,mlModel:!1}}catch(e){console.error("System status check failed:",e),r.value={backend:!1,database:!1,mlModel:!1}}};return x(()=>{d();const e=setInterval(d,3e4);return()=>clearInterval(e)}),(t,l)=>(a(),e("div",U,[s("div",q,[l[3]||(l[3]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-3"}," System Status ",-1)),s("div",C,[s("div",N,[s("div",{class:b(["w-2 h-2 rounded-full",r.value.backend?"bg-green-400":"bg-red-400"])},null,2),l[0]||(l[0]=s("span",{class:"text-xs text-gray-600 dark:text-gray-400"}," Backend ",-1))]),s("div",V,[s("div",{class:b(["w-2 h-2 rounded-full",r.value.database?"bg-green-400":"bg-red-400"])},null,2),l[1]||(l[1]=s("span",{class:"text-xs text-gray-600 dark:text-gray-400"}," Database ",-1))]),s("div",F,[s("div",{class:b(["w-2 h-2 rounded-full",r.value.mlModel?"bg-green-400":"bg-red-400"])},null,2),l[2]||(l[2]=s("span",{class:"text-xs text-gray-600 dark:text-gray-400"}," ML Model ",-1))])])])]))}}),O={class:"space-y-6"},Q=t({__name:"page",setup:t=>(t,r)=>(a(),e("div",O,[r[0]||(r[0]=s("div",{class:"text-center"},[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Sign in to your account "),s("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Access your admin dashboard ")],-1)),p(G),p(H)]))});export{Q as default};
