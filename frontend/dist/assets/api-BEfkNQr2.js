const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-Wcxyh3f8.js","assets/vendor-BByfD4fc.js"])))=>i.map(i=>d[i]);
import{e,D as t,q as s}from"./vendor-BByfD4fc.js";import{_ as n}from"./index-BDNhpap2.js";import{a}from"./utils-Bp8ce8Co.js";function i(n,a){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function r(n,a){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}const o=new class{axiosInstance;baseURL;constructor(){let e;window.location.hostname.includes("railway.app"),e=window.location.origin,this.baseURL=e,this.axiosInstance=a.create({baseURL:this.baseURL,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("admin_token"),window.location.href="/login"),Promise.reject(e)))}async handleRequest(e,t){try{if("undefined"==typeof window){return(await e).data}{const{useAppStore:s}=await n(async()=>{const{useAppStore:e}=await import("./app-Wcxyh3f8.js");return{useAppStore:e}},__vite__mapDeps([0,1])),a=s();a.setLoading(!0,t);try{return(await e).data}finally{a.setLoading(!1,t)}}}catch(s){if(console.error("API Error:",s),s.response?.data)throw{code:s.response.data.error?.code||"API_ERROR",message:s.response.data.error?.message||"An error occurred",status:s.response.status};throw{code:"NETWORK_ERROR",message:"Network connection failed",status:0}}}async login(e,t="admin@passivecaptcha.com"){return this.handleRequest(this.axiosInstance.post("/admin/login",{email:t,password:e}),"login")}async verifyToken(){return this.handleRequest(this.axiosInstance.get("/admin/verify-token"),"verifyToken")}async getDashboardStats(e="24h"){return this.handleRequest(this.axiosInstance.get(`/admin/analytics/stats?timeRange=${e}`),"getDashboardStats")}async getChartData(e="24h"){return this.handleRequest(this.axiosInstance.get(`/admin/analytics/charts?timeRange=${e}`),"getChartData")}async getDetectionData(e="24h"){return this.handleRequest(this.axiosInstance.get(`/admin/analytics/detection?timeRange=${e}`),"getDetectionData")}async getSystemHealth(){return this.handleRequest(this.axiosInstance.get("/admin/health"),"getSystemHealth")}async getRecentAlerts(){return this.handleRequest(this.axiosInstance.get("/admin/alerts/recent"))}async getTimelineLogs(e="all",t=0,s=50){return this.handleRequest(this.axiosInstance.get(`/admin/logs/timeline?filter=${e}&offset=${t}&limit=${s}`))}async getWebsites(e=!0){return this.handleRequest(this.axiosInstance.get(`/admin/websites?include_analytics=${e}`))}async createWebsite(e){return this.handleRequest(this.axiosInstance.post("/admin/websites",e))}async updateWebsite(e,t){return this.handleRequest(this.axiosInstance.put(`/admin/websites/${e}`,t))}async deleteWebsite(e){return this.handleRequest(this.axiosInstance.delete(`/admin/websites/${e}`))}async toggleWebsiteStatus(e){return this.handleRequest(this.axiosInstance.patch(`/admin/websites/${e}/status`))}async getMLMetrics(e="24h"){return this.handleRequest(this.axiosInstance.get(`/admin/ml/metrics?timeRange=${e}`))}async getModelInfo(){return this.handleRequest(this.axiosInstance.get("/admin/ml/info"))}async retrainModel(){return this.handleRequest(this.axiosInstance.post("/admin/ml/retrain"))}async generateScriptToken(e,t){return this.handleRequest(this.axiosInstance.post("/admin/scripts/generate",{website_id:e,script_version:"v2_enhanced",config:t||{}}))}async getScriptTokenInfo(e){return this.handleRequest(this.axiosInstance.get(`/admin/scripts/tokens/${e}`))}async revokeScriptToken(e,t,s){return this.revokeScriptTokenEnhanced(e,t,s)}async regenerateScriptToken(e,t){return this.regenerateScriptTokenEnhanced(e,{script_version:t||"v2_enhanced"})}async getScriptAnalytics(e,t){return this.handleRequest(this.axiosInstance.get(`/admin/scripts/analytics/${e}?timeRange=${t||"24h"}`))}async getRealtimeScriptAnalytics(e){return this.handleRequest(this.axiosInstance.get(`/admin/scripts/analytics/${e}/realtime`))}async getScriptStatistics(){return this.handleRequest(this.axiosInstance.get("/admin/scripts/statistics"))}async cleanupExpiredTokens(){return this.handleRequest(this.axiosInstance.post("/admin/scripts/cleanup"))}async getAllScriptTokens(){return this.handleRequest(this.axiosInstance.get("/admin/scripts/tokens"))}async updateTokenConfig(e,t,s){return this.handleRequest(this.axiosInstance.patch(`/admin/scripts/tokens/${e}/config`,{config:t,admin_user:s}))}async validateTokenSecurity(e){return this.handleRequest(this.axiosInstance.get(`/admin/scripts/tokens/${e}/security`))}async getTokenHistory(e){return this.handleRequest(this.axiosInstance.get(`/admin/scripts/tokens/${e}/history`))}async bulkRevokeTokens(e,t,s){return this.handleRequest(this.axiosInstance.post("/admin/scripts/tokens/bulk/revoke",{website_ids:e,reason:t,admin_user:s}))}async getRotationCandidates(e){const t=e?{days_threshold:e}:{};return this.handleRequest(this.axiosInstance.get("/admin/scripts/tokens/rotation/candidates",{params:t}))}async getTokensByEnvironment(e){return this.handleRequest(this.axiosInstance.get(`/admin/scripts/tokens/environment/${e}`))}async revokeScriptTokenEnhanced(e,t,s){return this.handleRequest(this.axiosInstance.post(`/admin/scripts/tokens/${e}/revoke`,{reason:t,admin_user:s}))}async regenerateScriptTokenEnhanced(e,t){return this.handleRequest(this.axiosInstance.post(`/admin/scripts/tokens/${e}/regenerate`,t||{}))}async exportData(e,t,s){const n=new URLSearchParams({format:e,type:t,...s&&{timeRange:s}});return this.handleRequest(this.axiosInstance.get(`/admin/export?${n}`))}async getRealtimeStats(){return this.handleRequest(this.axiosInstance.get("/admin/realtime/stats"))}async getApiConfig(){return this.handleRequest(this.axiosInstance.get("/admin/config/api"))}async updateApiConfig(e){return this.handleRequest(this.axiosInstance.put("/admin/config/api",e))}};export{i as a,o as b,r};
