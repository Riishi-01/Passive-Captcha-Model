import{e,D as t,q as a,d as r,r as s,a as i,P as l,p as n,G as o,u as d,Q as c,S as g,F as u,z as x,f as m,t as b,s as y,y as v,U as p,j as f,M as k,V as h,O as w,R as C}from"./vendor-BByfD4fc.js";import{u as A}from"./index-BgQQ-uRh.js";import{useAppStore as _}from"./app-Wcxyh3f8.js";import{u as j,r as S}from"./websites-CDwCspAi.js";import{a as T}from"./utils-Bp8ce8Co.js";import{r as V}from"./XMarkIcon-WKGGK6VI.js";import{r as E}from"./PlusIcon-CuBwo9eu.js";import{r as I,a as R}from"./CogIcon-CK2M-RuW.js";import{r as D}from"./TrashIcon-DtctD4J8.js";import{r as P,a as L}from"./api-C081dHGG.js";import{r as M}from"./ExclamationTriangleIcon-CMg3JLn_.js";import{r as N,a as U}from"./EyeIcon-iFm-iff6.js";import{_ as B}from"./_plugin-vue_export-helper-BCo6x5W8.js";function F(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function H(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function W(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"})])}function $(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function z(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const G={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden"},q={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},K={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Z={class:"mb-8 p-6 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},O={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Q=["disabled"],X={class:"space-y-4"},J={class:"flex items-center space-x-4"},Y={class:"font-medium text-gray-900 dark:text-white"},ee={class:"text-sm text-gray-500 dark:text-gray-400"},te={class:"flex items-center space-x-4"},ae={class:"text-right"},re={class:"text-sm font-medium text-gray-900 dark:text-white"},se={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ie=["onClick"],le=["onClick"],ne=["onClick"],oe={key:0,class:"text-center py-8"},de={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},ce={class:"text-lg font-semibold text-gray-900 dark:text-white"},ge={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},ue={key:0,class:"text-center py-8"},xe={class:"text-gray-600 dark:text-gray-400 mb-6"},me=["disabled"],be={key:1,class:"space-y-6"},ye={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4"},ve={class:"flex items-center justify-between mb-3"},pe={class:"grid grid-cols-2 gap-4 text-sm"},fe={class:"ml-2 text-gray-900 dark:text-white"},ke={class:"ml-2 text-gray-900 dark:text-white"},he={class:"ml-2 text-gray-900 dark:text-white"},we={class:"ml-2 text-gray-900 dark:text-white"},Ce={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4"},Ae={class:"flex items-center justify-between mb-3"},_e={class:"text-xs text-gray-600 dark:text-gray-400 whitespace-pre-wrap bg-white dark:bg-gray-800 p-3 rounded border overflow-x-auto"},je={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Se={class:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-3"},Te={class:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4"},Ve={class:"text-sm font-medium text-red-900 dark:text-red-100 mb-3"},Ee=["disabled"],Ie=r({__name:"WebsitesModal",emits:["close"],setup(r){const p=_(),f=s({name:"",url:""}),k=s([]),h=j();i(()=>h.websites,e=>{k.value=e.map(e=>({id:e.id,name:e.name,url:`https://${e.domain}`,status:e.status,totalVerifications:e.totalVerifications,integration_status:e.integration_status||"not_integrated",has_script_token:e.has_script_token||!1,script_token_info:e.script_token_info}))},{immediate:!0});const w=s(!1),C=s(null),A=s(null),S=s(""),R=s(!1),L=s(!1),N=e=>{e.target,e.currentTarget},U=async()=>{if(f.value.name&&f.value.url)try{await h.addWebsite(f.value.name,f.value.url),p.addNotification({type:"success",title:"Website Added",message:`${f.value.name} has been added successfully`}),f.value={name:"",url:""},await h.fetchWebsites()}catch(e){console.error("Error adding website:",e),p.addNotification({type:"error",title:"Failed to Add Website",message:e.message||"Failed to add website"})}},B=()=>{w.value=!1,C.value=null,A.value=null,S.value=""},F=async e=>{try{const t=await T.get(`/admin/scripts/tokens/${e}`);t.data.success&&(A.value=t.data.data.token,S.value=t.data.data.token.integration?.integration_code||"")}catch(t){A.value=null,S.value=""}},H=async()=>{if(C.value){R.value=!0;try{const e=await T.post("/admin/scripts/generate",{website_id:C.value.id,script_version:"v2_enhanced"});if(e.data.success){A.value=e.data.data.token,S.value=e.data.data.integration.integration_code;const t=k.value.find(e=>e.id===C.value.id);t&&(t.has_script_token=!0,t.integration_status="pending"),p.addNotification({type:"success",title:"Script Token Generated",message:"Integration code is ready to be added to your website"})}}catch(e){console.error("Error generating token:",e),p.addNotification({type:"error",title:"Generation Failed",message:e.response?.data?.error?.message||"Failed to generate script token"})}finally{R.value=!1}}},z=async()=>{if(C.value&&A.value&&confirm("Are you sure you want to delete this script token? This will permanently disable data collection for this website.")){L.value=!0;try{if((await T.post(`/admin/scripts/tokens/${C.value.id}/revoke`)).data.success){const e=k.value.find(e=>e.id===C.value.id);e&&(e.has_script_token=!1,e.integration_status="not_integrated"),A.value=null,S.value="",p.addNotification({type:"success",title:"Script Token Deleted",message:"Script token has been permanently deleted"})}}catch(e){console.error("Error deleting token:",e),p.addNotification({type:"error",title:"Deletion Failed",message:e.response?.data?.error?.message||"Failed to delete script token"})}finally{L.value=!1}}},Ie=async()=>{try{await navigator.clipboard.writeText(S.value),p.addNotification({type:"success",title:"Copied!",message:"Integration code copied to clipboard"})}catch(e){console.error("Failed to copy:",e),p.addNotification({type:"error",title:"Copy Failed",message:"Failed to copy integration code"})}},Re=e=>{switch(e.integration_status){case"active":return"text-green-600";case"pending":return"text-yellow-600";case"inactive":case"revoked":return"text-red-600";default:return"text-gray-500"}},De=e=>{switch(e.integration_status){case"active":return"Active";case"pending":return"Pending";case"inactive":return"Inactive";case"revoked":return"Revoked";default:return"Not Generated"}},Pe=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"inactive":case"revoked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Le=e=>{switch(e){case"active":return"Active";case"pending":return"Pending";case"inactive":return"Inactive";case"revoked":return"Revoked";case"expired":return"Expired";default:return"Unknown"}},Me=e=>new Date(e).toLocaleDateString()+" "+new Date(e).toLocaleTimeString();return l(async()=>{try{await h.fetchWebsites()}catch(e){console.error("Failed to load websites:",e)}}),(r,s)=>(t(),e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:N},[a("div",G,[a("div",q,[s[4]||(s[4]=a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Website Management ",-1)),a("button",{onClick:s[0]||(s[0]=e=>r.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[o(d(V),{class:"h-6 w-6"})])]),a("div",K,[a("div",Z,[s[6]||(s[6]=a("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-4"},"Add New Website",-1)),a("div",O,[c(a("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>f.value.name=e),type:"text",placeholder:"Website Name",class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[g,f.value.name]]),c(a("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>f.value.url=e),type:"url",placeholder:"https://example.com",class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[g,f.value.url]]),a("button",{onClick:U,disabled:!f.value.name||!f.value.url,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center justify-center space-x-2"},[o(d(E),{class:"h-4 w-4"}),s[5]||(s[5]=a("span",null,"Add Website",-1))],8,Q)])]),a("div",X,[(t(!0),e(u,null,x(k.value,r=>{return t(),e("div",{key:r.id,class:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"},[a("div",J,[a("div",{class:m(["w-3 h-3 rounded-full","active"===r.status?"bg-green-500":"bg-gray-400"])},null,2),a("div",null,[a("h5",Y,b(r.name),1),a("p",ee,b(r.url),1)])]),a("div",te,[a("div",ae,[a("div",re,b((i=r.totalVerifications,i>=1e6?(i/1e6).toFixed(1)+"M":i>=1e3?(i/1e3).toFixed(1)+"K":i.toString())),1),s[8]||(s[8]=a("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"verifications",-1)),a("div",se,[s[7]||(s[7]=y(" Script: ",-1)),a("span",{class:m(Re(r))},b(De(r)),3)])]),a("button",{onClick:e=>(async e=>{C.value=e,w.value=!0,e.has_script_token?await F(e.id):(A.value=null,S.value="")})(r),class:"px-3 py-1 rounded-lg text-xs font-medium transition-colors bg-indigo-100 text-indigo-800 hover:bg-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400"},[o(d(I),{class:"h-4 w-4 inline mr-1"}),s[9]||(s[9]=y(" Script ",-1))],8,ie),a("button",{onClick:e=>(e=>{e.status="active"===e.status?"inactive":"active"})(r),class:m(["px-3 py-1 rounded-full text-xs font-medium transition-colors","active"===r.status?"bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-800 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400"])},b("active"===r.status?"Disable":"Enable"),11,le),a("button",{onClick:e=>(e=>{if(confirm("Are you sure you want to delete this website?")){const t=k.value.findIndex(t=>t.id===e);t>-1&&k.value.splice(t,1)}})(r.id),class:"p-1 text-red-400 hover:text-red-600 transition-colors"},[o(d(D),{class:"h-4 w-4"})],8,ne)])]);var i}),128))]),k.value.length?n("",!0):(t(),e("div",oe,[o(d(P),{class:"w-16 h-16 mx-auto mb-4 text-gray-400"}),s[10]||(s[10]=a("p",{class:"text-gray-500 dark:text-gray-400"},"No websites configured yet",-1)),s[11]||(s[11]=a("p",{class:"text-sm text-gray-400 dark:text-gray-500 mt-1"},"Add your first website above to get started",-1))]))])]),w.value?(t(),e("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",onClick:B},[a("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",onClick:s[3]||(s[3]=v(()=>{},["stop"]))},[a("div",de,[a("h3",ce," Script Integration - "+b(C.value?.name),1),a("button",{onClick:B,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[o(d(V),{class:"h-6 w-6"})])]),a("div",ge,[A.value?(t(),e("div",be,[a("div",ye,[a("div",ve,[s[14]||(s[14]=a("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Token Status",-1)),a("span",{class:m(["inline-flex px-3 py-1 text-xs font-medium rounded-full",Pe(A.value.status)])},b(Le(A.value.status)),3)]),a("div",pe,[a("div",null,[s[15]||(s[15]=a("span",{class:"text-gray-500 dark:text-gray-400"},"Created:",-1)),a("span",fe,b(Me(A.value.created_at)),1)]),a("div",null,[s[16]||(s[16]=a("span",{class:"text-gray-500 dark:text-gray-400"},"Last Used:",-1)),a("span",ke,b(A.value.last_used_at?Me(A.value.last_used_at):"Never"),1)]),a("div",null,[s[17]||(s[17]=a("span",{class:"text-gray-500 dark:text-gray-400"},"Usage Count:",-1)),a("span",he,b(A.value.usage_count||0)+" requests ",1)]),a("div",null,[s[18]||(s[18]=a("span",{class:"text-gray-500 dark:text-gray-400"},"Version:",-1)),a("span",we,b(A.value.script_version),1)])])]),a("div",Ce,[a("div",Ae,[s[20]||(s[20]=a("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Integration Code",-1)),a("button",{onClick:Ie,class:"inline-flex items-center px-3 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-500 transition-colors"},[o(d(W),{class:"h-4 w-4 mr-1"}),s[19]||(s[19]=y(" Copy Code ",-1))])]),a("pre",_e,b(S.value),1)]),a("div",je,[a("h4",Se,[o(d($),{class:"h-4 w-4 inline mr-1"}),s[21]||(s[21]=y(" Integration Instructions ",-1))]),s[22]||(s[22]=a("ol",{class:"text-sm text-blue-800 dark:text-blue-200 space-y-2 list-decimal list-inside"},[a("li",null,"Copy the integration code above"),a("li",null,"Paste it in the <head> section of your website"),a("li",null,"The script will automatically start collecting passive data"),a("li",null,"Monitor this dashboard for real-time analytics")],-1))]),a("div",Te,[a("h4",Ve,[o(d(M),{class:"h-4 w-4 inline mr-1"}),s[23]||(s[23]=y(" Danger Zone ",-1))]),s[24]||(s[24]=a("p",{class:"text-sm text-red-800 dark:text-red-200 mb-3"}," Deleting the script token will permanently disable data collection for this website. ",-1)),a("button",{onClick:z,disabled:L.value,class:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50"},[o(d(D),{class:"h-4 w-4 mr-2"}),y(" "+b(L.value?"Deleting...":"Delete Script Token"),1)],8,Ee)])])):(t(),e("div",ue,[o(d(I),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s[12]||(s[12]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," No Script Token Generated ",-1)),a("p",xe," Generate a one-time script token for "+b(C.value?.name)+" to start collecting passive data. ",1),a("button",{onClick:H,disabled:R.value,class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},[o(d(I),{class:"h-5 w-5 mr-2"}),y(" "+b(R.value?"Generating...":"Generate Script Token"),1)],8,me),s[13]||(s[13]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-3"}," This is a one-time operation. Once generated, the token cannot be edited, only deleted. ",-1))]))])])])):n("",!0)]))}}),Re={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-2xl mx-4"},De={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Pe={class:"p-6 space-y-6"},Le={class:"relative"},Me=["type"],Ne={class:"flex items-center justify-between"},Ue={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4"},Be={class:"flex items-center justify-between"},Fe=["disabled"],He={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},We={class:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700"},$e=r({__name:"ApiConfigModal",emits:["close"],setup(r){const i=s(!1),l=s(!1),u=s(null),x=s({apiEndpoint:"http://localhost:5002",apiKey:"admin-secret-key",rateLimit:100,timeout:30,sslVerification:!0}),y=e=>{e.target,e.currentTarget},v=async()=>{l.value=!0,u.value=null;try{await new Promise(e=>setTimeout(e,1500)),u.value={success:!0,message:"Connection successful! API is responding correctly."}}catch(e){u.value={success:!1,message:"Connection failed. Please check your configuration."}}finally{l.value=!1}},k=()=>{console.log("Saving API configuration:",x.value)};return(r,s)=>(t(),e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:y},[a("div",Re,[a("div",De,[s[8]||(s[8]=a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," API Configuration ",-1)),a("button",{onClick:s[0]||(s[0]=e=>r.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[o(d(V),{class:"h-6 w-6"})])]),a("div",Pe,[a("div",null,[s[9]||(s[9]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," API Endpoint ",-1)),c(a("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>x.value.apiEndpoint=e),type:"url",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"https://api.passivecaptcha.com"},null,512),[[g,x.value.apiEndpoint]])]),a("div",null,[s[10]||(s[10]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," API Key ",-1)),a("div",Le,[c(a("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>x.value.apiKey=e),type:i.value?"text":"password",class:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"sk-..."},null,8,Me),[[p,x.value.apiKey]]),a("button",{onClick:s[3]||(s[3]=e=>i.value=!i.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[i.value?(t(),f(d(U),{key:1,class:"h-5 w-5 text-gray-400"})):(t(),f(d(N),{key:0,class:"h-5 w-5 text-gray-400"}))])])]),a("div",null,[s[11]||(s[11]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Rate Limit (requests per minute) ",-1)),c(a("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>x.value.rateLimit=e),type:"number",min:"1",max:"1000",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[g,x.value.rateLimit,void 0,{number:!0}]])]),a("div",null,[s[12]||(s[12]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Request Timeout (seconds) ",-1)),c(a("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>x.value.timeout=e),type:"number",min:"1",max:"60",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[g,x.value.timeout,void 0,{number:!0}]])]),a("div",Ne,[s[13]||(s[13]=a("div",null,[a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Enable SSL Verification "),a("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Verify SSL certificates for HTTPS requests ")],-1)),a("button",{onClick:s[6]||(s[6]=e=>x.value.sslVerification=!x.value.sslVerification),class:m(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",x.value.sslVerification?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700"])},[a("span",{class:m(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",x.value.sslVerification?"translate-x-6":"translate-x-1"])},null,2)],2)]),a("div",Ue,[a("div",Be,[s[14]||(s[14]=a("div",null,[a("h4",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Test Connection"),a("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Verify your API configuration")],-1)),a("button",{onClick:v,disabled:l.value,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center space-x-2"},[l.value?(t(),e("span",He)):n("",!0),a("span",null,b(l.value?"Testing...":"Test"),1)],8,Fe)]),u.value?(t(),e("div",{key:0,class:m(["mt-3 p-2 rounded text-xs",u.value.success?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"])},b(u.value.message),3)):n("",!0)])]),a("div",We,[a("button",{onClick:s[7]||(s[7]=e=>r.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Cancel "),a("button",{onClick:k,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"}," Save Configuration ")])])]))}}),ze={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-2xl mx-4"},Ge={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},qe={class:"p-6 space-y-6"},Ke={class:"space-y-4"},Ze={class:"flex items-center justify-between"},Oe={class:"flex items-center justify-between"},Qe={class:"flex items-center justify-between"},Xe={class:"space-y-2"},Je=["onUpdate:modelValue"],Ye=["onClick"],et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tt={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4"},at={class:"flex items-center justify-between"},rt=["disabled"],st={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},it={class:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700"},lt=r({__name:"AlertSettingsModal",emits:["close"],setup(r){const i=s(!1),l=s({emailAlerts:{highBotRate:!0,systemDown:!0,rateLimitExceeded:!1},emailRecipients:["admin@passivecaptcha.com"],thresholds:{botDetectionRate:25,responseTime:500}}),y=e=>{e.target,e.currentTarget},v=()=>{l.value.emailRecipients.push("")},p=async()=>{i.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),console.log("Test alert sent to:",l.value.emailRecipients)}finally{i.value=!1}},f=()=>{console.log("Saving alert settings:",l.value)};return(r,s)=>(t(),e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:y},[a("div",ze,[a("div",Ge,[s[7]||(s[7]=a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Alert Settings ",-1)),a("button",{onClick:s[0]||(s[0]=e=>r.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[o(d(V),{class:"h-6 w-6"})])]),a("div",qe,[a("div",null,[s[11]||(s[11]=a("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-4"},"Email Notifications",-1)),a("div",Ke,[a("div",Ze,[s[8]||(s[8]=a("div",null,[a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," High Bot Detection Rate "),a("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Alert when bot detection exceeds threshold ")],-1)),a("button",{onClick:s[1]||(s[1]=e=>l.value.emailAlerts.highBotRate=!l.value.emailAlerts.highBotRate),class:m(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",l.value.emailAlerts.highBotRate?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700"])},[a("span",{class:m(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",l.value.emailAlerts.highBotRate?"translate-x-6":"translate-x-1"])},null,2)],2)]),a("div",Oe,[s[9]||(s[9]=a("div",null,[a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," System Downtime "),a("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Alert when system components are offline ")],-1)),a("button",{onClick:s[2]||(s[2]=e=>l.value.emailAlerts.systemDown=!l.value.emailAlerts.systemDown),class:m(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",l.value.emailAlerts.systemDown?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700"])},[a("span",{class:m(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",l.value.emailAlerts.systemDown?"translate-x-6":"translate-x-1"])},null,2)],2)]),a("div",Qe,[s[10]||(s[10]=a("div",null,[a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," API Rate Limit Exceeded "),a("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Alert when API rate limits are reached ")],-1)),a("button",{onClick:s[3]||(s[3]=e=>l.value.emailAlerts.rateLimitExceeded=!l.value.emailAlerts.rateLimitExceeded),class:m(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",l.value.emailAlerts.rateLimitExceeded?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700"])},[a("span",{class:m(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",l.value.emailAlerts.rateLimitExceeded?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),a("div",null,[s[13]||(s[13]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email Recipients ",-1)),a("div",Xe,[(t(!0),e(u,null,x(l.value.emailRecipients,(r,s)=>(t(),e("div",{key:s,class:"flex items-center space-x-2"},[c(a("input",{"onUpdate:modelValue":e=>l.value.emailRecipients[s]=e,type:"email",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"admin@example.com"},null,8,Je),[[g,l.value.emailRecipients[s]]]),a("button",{onClick:e=>(e=>{l.value.emailRecipients.splice(e,1)})(s),class:"p-2 text-red-400 hover:text-red-600 transition-colors"},[o(d(D),{class:"h-4 w-4"})],8,Ye)]))),128)),a("button",{onClick:v,class:"flex items-center space-x-2 text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300"},[o(d(E),{class:"h-4 w-4"}),s[12]||(s[12]=a("span",null,"Add Email",-1))])])]),a("div",null,[s[16]||(s[16]=a("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-4"},"Alert Thresholds",-1)),a("div",et,[a("div",null,[s[14]||(s[14]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Bot Detection Rate (%) ",-1)),c(a("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>l.value.thresholds.botDetectionRate=e),type:"number",min:"0",max:"100",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[g,l.value.thresholds.botDetectionRate,void 0,{number:!0}]])]),a("div",null,[s[15]||(s[15]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Response Time (ms) ",-1)),c(a("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>l.value.thresholds.responseTime=e),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[g,l.value.thresholds.responseTime,void 0,{number:!0}]])])])]),a("div",tt,[a("div",at,[s[17]||(s[17]=a("div",null,[a("h4",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Test Alert"),a("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Send a test notification to verify settings")],-1)),a("button",{onClick:p,disabled:i.value,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center space-x-2"},[i.value?(t(),e("span",st)):n("",!0),a("span",null,b(i.value?"Sending...":"Send Test"),1)],8,rt)])])]),a("div",it,[a("button",{onClick:s[6]||(s[6]=e=>r.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Cancel "),a("button",{onClick:f,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"}," Save Settings ")])])]))}}),nt={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},ot={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 sticky top-0 z-40"},dt={class:"flex items-center justify-between"},ct={class:"flex items-center space-x-4"},gt={class:"relative"},ut={key:0,class:"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50"},xt={class:"p-2"},mt={class:"p-6"},bt=B(r({__name:"layout",setup(r){const i=s(!1),c=s(!1),g=s(!1),u=s(!1),x=k(),m=A(),b=e=>{e.target.closest(".relative")||(i.value=!1)};return l(()=>{document.addEventListener("click",b)}),h(()=>{document.removeEventListener("click",b)}),(r,s)=>(t(),e("div",nt,[a("header",ot,[a("div",dt,[s[17]||(s[17]=w('<div class="flex items-center space-x-4" data-v-61d53c72><div class="h-8 w-8 bg-indigo-600 rounded-lg flex items-center justify-center" data-v-61d53c72><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-61d53c72><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" data-v-61d53c72></path></svg></div><h1 class="text-xl font-bold text-gray-900 dark:text-white" data-v-61d53c72> Passive CAPTCHA Dashboard </h1></div>',1)),a("div",ct,[s[16]||(s[16]=a("div",{class:"flex items-center space-x-2"},[a("div",{class:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"System Online")],-1)),a("div",gt,[a("button",{onClick:s[0]||(s[0]=e=>i.value=!i.value),class:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[o(d(R),{class:"h-5 w-5"}),s[9]||(s[9]=a("span",{class:"text-sm font-medium"},"Settings",-1)),o(d(S),{class:"h-4 w-4"})]),i.value?(t(),e("div",ut,[a("div",xt,[a("button",{onClick:s[1]||(s[1]=e=>{c.value=!0,i.value=!1}),class:"w-full flex items-center space-x-3 px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"},[o(d(P),{class:"h-4 w-4"}),s[10]||(s[10]=a("span",null,"Manage Websites",-1))]),a("button",{onClick:s[2]||(s[2]=e=>{g.value=!0,i.value=!1}),class:"w-full flex items-center space-x-3 px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"},[o(d(z),{class:"h-4 w-4"}),s[11]||(s[11]=a("span",null,"API Configuration",-1))]),a("button",{onClick:s[3]||(s[3]=e=>{u.value=!0,i.value=!1}),class:"w-full flex items-center space-x-3 px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"},[o(d(H),{class:"h-4 w-4"}),s[12]||(s[12]=a("span",null,"Alert Settings",-1))]),s[15]||(s[15]=a("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),a("button",{onClick:s[4]||(s[4]=e=>{console.log("Exporting dashboard data..."),i.value=!1}),class:"w-full flex items-center space-x-3 px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"},[o(d(L),{class:"h-4 w-4"}),s[13]||(s[13]=a("span",null,"Export Data",-1))]),a("button",{onClick:s[5]||(s[5]=e=>{(async()=>{await m.logout(),x.push("/login")})(),i.value=!1}),class:"w-full flex items-center space-x-3 px-3 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md"},[o(d(F),{class:"h-4 w-4"}),s[14]||(s[14]=a("span",null,"Logout",-1))])])])):n("",!0)])])])]),a("main",mt,[o(d(C))]),c.value?(t(),f(Ie,{key:0,onClose:s[6]||(s[6]=e=>c.value=!1)})):n("",!0),g.value?(t(),f($e,{key:1,onClose:s[7]||(s[7]=e=>g.value=!1)})):n("",!0),u.value?(t(),f(lt,{key:2,onClose:s[8]||(s[8]=e=>u.value=!1)})):n("",!0)]))}}),[["__scopeId","data-v-61d53c72"]]);export{bt as default};
