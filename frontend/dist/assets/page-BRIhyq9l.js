import{e,D as t,q as a,d as r,r as s,N as d,U as l,p as i,O as o,V as n,G as c,f as g,u as x,t as u,h as v,F as y,z as m,j as b,X as p,S as k,W as h,a as f,s as w,k as _,Y as C,y as S,P as j}from"./vendor-kbKO8dgQ.js";import{b as A,r as F}from"./api-bDtdmj2A.js";import{S as I}from"./ScriptGeneratorModal-DLfWyZ9u.js";import{c as T,a as M,r as D,b as L}from"./ShieldCheckIcon-1XaN3I0g.js";import{r as W}from"./ExclamationTriangleIcon-D2OrJjef.js";import{r as U}from"./UserIcon-CSQx5B72.js";import{r as V}from"./InformationCircleIcon-DOLZSJot.js";import{r as P}from"./CheckCircleIcon-D7bsXacd.js";import{_ as z}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{r as E,a as H}from"./CogIcon-DVePFGMK.js";import"./utils-Bp8ce8Co.js";import"./XMarkIcon-7RSvE2BE.js";import"./XCircleIcon-DhVsPiYz.js";function R(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function N(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function $(r,s){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const q={class:"space-y-6"},G={class:"flex items-center justify-between"},B={class:"flex items-center space-x-3"},O=["disabled"],X={key:0,class:"flex items-center justify-center py-12"},J={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},K={class:"flex"},Z={class:"ml-3"},Y={class:"text-sm text-red-700 dark:text-red-300 mt-1"},Q={key:2,class:"space-y-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},te={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},ae={class:"flex items-center"},re={class:"flex-shrink-0"},se={class:"ml-4"},de={class:"text-2xl font-bold text-gray-900 dark:text-white"},le={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},ie={class:"flex items-center"},oe={class:"flex-shrink-0"},ne={class:"ml-4"},ce={class:"text-2xl font-bold text-gray-900 dark:text-white"},ge={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},xe={class:"flex items-center"},ue={class:"flex-shrink-0"},ve={class:"ml-4"},ye={class:"text-2xl font-bold text-gray-900 dark:text-white"},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},be={class:"flex items-center"},pe={class:"flex-shrink-0"},ke={class:"ml-4"},he={class:"text-2xl font-bold text-gray-900 dark:text-white"},fe={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},we={class:"p-4"},_e={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ce={class:"space-y-2"},Se={class:"flex items-center space-x-2"},je={class:"text-sm text-gray-900 dark:text-white capitalize"},Ae={class:"space-y-2"},Fe={class:"text-sm text-gray-900 dark:text-white"},Ie={class:"space-y-2"},Te={class:"text-sm text-gray-900 dark:text-white"},Me={class:"space-y-2"},De={class:"text-sm text-gray-900 dark:text-white"},Le={class:"space-y-2"},We={class:"text-sm text-gray-900 dark:text-white"},Ue={class:"space-y-2"},Ve={class:"flex items-center space-x-2"},Pe={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},ze={class:"text-sm text-gray-900 dark:text-white"},Ee={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},He={class:"p-4"},Re={key:0,class:"h-64"},Ne={class:"space-y-2"},$e={class:"max-h-48 overflow-y-auto"},qe={class:"min-w-full text-xs"},Ge={class:"divide-y divide-gray-200 dark:divide-gray-700"},Be={class:"px-3 py-2 text-gray-900 dark:text-white"},Oe={class:"px-3 py-2 text-gray-900 dark:text-white"},Xe={class:"px-3 py-2 text-green-600 dark:text-green-400"},Je={class:"px-3 py-2 text-red-600 dark:text-red-400"},Ke={class:"px-3 py-2 text-gray-900 dark:text-white"},Ze={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Ye={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Qe={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},et={class:"p-4 space-y-3"},tt={class:"text-sm text-gray-600 dark:text-gray-400 capitalize"},at={class:"text-sm text-gray-900 dark:text-white"},rt={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},st={class:"p-4"},dt={key:0,class:"space-y-3"},lt={class:"flex items-start"},it={class:"ml-3"},ot={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},nt={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},ct={class:"p-4 border-b border-gray-200 dark:border-gray-700"},gt={class:"flex items-center justify-between"},xt={class:"flex items-center space-x-2"},ut={class:"text-sm text-gray-500 dark:text-gray-400 capitalize"},vt={class:"p-4"},yt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mt={class:"text-center"},bt={class:"text-2xl font-bold text-gray-900 dark:text-white"},pt={class:"text-center"},kt={class:"text-2xl font-bold text-gray-900 dark:text-white"},ht={class:"text-center"},ft={class:"text-2xl font-bold text-gray-900 dark:text-white"},wt={class:"text-center"},_t={class:"text-sm text-gray-900 dark:text-white"},Ct=z(r({__name:"ScriptAnalyticsDashboard",props:{websiteId:{}},setup(r){const p=r,k=s("24h"),h=s(!1),f=s(""),w=s(null),_=s(null),C=s(null),S=async()=>{h.value=!0,f.value="";try{const e=await A.getScriptAnalytics(p.websiteId,k.value);if(!e.success)throw new Error(e.error?.message||"Failed to load analytics");w.value=e.data}catch(e){f.value=e.message||"Failed to load analytics"}finally{h.value=!1}},j=async()=>{try{const e=await A.getRealtimeScriptAnalytics(p.websiteId);e.success&&(_.value=e.data)}catch(e){console.warn("Failed to load realtime data:",e)}},F=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),I=e=>{if(!e)return"Never";const t=new Date(e),a=new Date,r=Math.floor((a.getTime()-t.getTime())/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()},z=e=>"boolean"==typeof e?e?"Enabled":"Disabled":"number"==typeof e?e.toString():String(e);return d(()=>{S(),j(),C.value=window.setInterval(j,3e4)}),l(()=>{C.value&&(clearInterval(C.value),C.value=null)}),(r,s)=>{return t(),e("div",q,[a("div",G,[s[2]||(s[2]=a("div",null,[a("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Script Analytics "),a("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Monitor and analyze your Passive CAPTCHA script performance ")],-1)),a("div",B,[o(a("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>k.value=e),onChange:S,class:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},s[1]||(s[1]=[a("option",{value:"1h"},"Last Hour",-1),a("option",{value:"24h"},"Last 24 Hours",-1),a("option",{value:"7d"},"Last 7 Days",-1),a("option",{value:"30d"},"Last 30 Days",-1)]),544),[[n,k.value]]),a("button",{onClick:S,disabled:h.value,class:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors disabled:opacity-50"},[c(x(T),{class:g(["h-4 w-4",{"animate-spin":h.value}])},null,8,["class"])],8,O)])]),h.value&&!w.value?(t(),e("div",X,s[3]||(s[3]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-500 border-t-transparent"},null,-1)]))):f.value?(t(),e("div",J,[a("div",K,[c(x(W),{class:"h-5 w-5 text-red-400 flex-shrink-0"}),a("div",Z,[s[4]||(s[4]=a("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"Error loading analytics",-1)),a("p",Y,u(f.value),1)])])])):w.value?(t(),e("div",Q,[a("div",ee,[a("div",te,[a("div",ae,[a("div",re,[c(x(M),{class:"h-8 w-8 text-blue-500"})]),a("div",se,[a("div",de,u(F(w.value.overview.total_verifications)),1),s[5]||(s[5]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Verifications",-1))])])]),a("div",le,[a("div",ie,[a("div",oe,[c(x(U),{class:"h-8 w-8 text-green-500"})]),a("div",ne,[a("div",ce,u(w.value.overview.human_rate)+"% ",1),s[6]||(s[6]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Human Rate",-1))])])]),a("div",ge,[a("div",xe,[a("div",ue,[c(x(D),{class:"h-8 w-8 text-yellow-500"})]),a("div",ve,[a("div",ye,u(w.value.overview.average_response_time)+"ms ",1),s[7]||(s[7]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Avg Response Time",-1))])])]),a("div",me,[a("div",be,[a("div",pe,[c(x(L),{class:"h-8 w-8 text-purple-500"})]),a("div",ke,[a("div",he,u((100*w.value.overview.average_confidence).toFixed(1))+"% ",1),s[8]||(s[8]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Avg Confidence",-1))])])])]),a("div",fe,[s[15]||(s[15]=a("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Script Performance")],-1)),a("div",we,[a("div",_e,[a("div",Ce,[s[9]||(s[9]=a("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Integration Status",-1)),a("div",Se,[a("div",{class:g(["w-3 h-3 rounded-full","active"===w.value.script_performance.integration_status?"bg-green-500":"bg-red-500"])},null,2),a("span",je,u(w.value.script_performance.integration_status),1)])]),a("div",Ae,[s[10]||(s[10]=a("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Script Version",-1)),a("div",Fe,u(w.value.script_performance.script_version),1)]),a("div",Ie,[s[11]||(s[11]=a("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Uptime",-1)),a("div",Te,u(w.value.script_performance.uptime_percentage)+"% ",1)]),a("div",Me,[s[12]||(s[12]=a("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Total Requests",-1)),a("div",De,u(F(w.value.script_performance.total_requests)),1)]),a("div",Le,[s[13]||(s[13]=a("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Last Used",-1)),a("div",We,u(I(w.value.script_performance.last_used)),1)]),a("div",Ue,[s[14]||(s[14]=a("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Performance Score",-1)),a("div",Ve,[a("div",Pe,[a("div",{class:g(["h-2 rounded-full transition-all duration-300",(d=w.value.integration_health.performance_score,d>=90?"bg-green-500":d>=70?"bg-yellow-500":"bg-red-500")]),style:v({width:`${w.value.integration_health.performance_score}%`})},null,6)]),a("span",ze,u(w.value.integration_health.performance_score)+"/100 ",1)])])])])]),a("div",Ee,[s[18]||(s[18]=a("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Verification Trends")],-1)),a("div",He,[w.value.time_series&&w.value.time_series.length>0?(t(),e("div",Re,[a("div",Ne,[s[17]||(s[17]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},"Hourly verification data",-1)),a("div",$e,[a("table",qe,[s[16]||(s[16]=a("thead",{class:"bg-gray-50 dark:bg-gray-900"},[a("tr",null,[a("th",{class:"px-3 py-2 text-left text-gray-500 dark:text-gray-400"},"Time"),a("th",{class:"px-3 py-2 text-left text-gray-500 dark:text-gray-400"},"Total"),a("th",{class:"px-3 py-2 text-left text-gray-500 dark:text-gray-400"},"Human"),a("th",{class:"px-3 py-2 text-left text-gray-500 dark:text-gray-400"},"Bot"),a("th",{class:"px-3 py-2 text-left text-gray-500 dark:text-gray-400"},"Confidence")])],-1)),a("tbody",Ge,[(t(!0),e(y,null,m(w.value.time_series,r=>{return t(),e("tr",{key:r.timestamp,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[a("td",Be,u((s=r.timestamp,new Date(s).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}))),1),a("td",Oe,u(r.total_verifications),1),a("td",Xe,u(r.human_verifications),1),a("td",Je,u(r.bot_verifications),1),a("td",Ke,u((100*r.average_confidence).toFixed(1))+"%",1)]);var s}),128))])])])])])):(t(),e("div",Ze," No verification data available for the selected time range "))])]),a("div",Ye,[a("div",Qe,[s[19]||(s[19]=a("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Current Configuration")],-1)),a("div",et,[(t(!0),e(y,null,m(w.value.configuration.current_config,(r,s)=>(t(),e("div",{key:s,class:"flex justify-between"},[a("span",tt,u(s.replace(/_/g," ")),1),a("span",at,u(z(r)),1)]))),128))])]),a("div",rt,[s[21]||(s[21]=a("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Optimization Suggestions")],-1)),a("div",st,[w.value.configuration.optimization_suggestions.length>0?(t(),e("div",dt,[(t(!0),e(y,null,m(w.value.configuration.optimization_suggestions,r=>(t(),e("div",{key:r.title,class:g(["p-3 rounded-lg border","warning"===r.type?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":"info"===r.type?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"])},[a("div",lt,["warning"===r.type?(t(),b(x(W),{key:0,class:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"})):"info"===r.type?(t(),b(x(V),{key:1,class:"h-5 w-5 text-blue-400 flex-shrink-0 mt-0.5"})):(t(),b(x(P),{key:2,class:"h-5 w-5 text-green-400 flex-shrink-0 mt-0.5"})),a("div",it,[a("h4",{class:g(["text-sm font-medium",["warning"===r.type?"text-yellow-800 dark:text-yellow-200":"info"===r.type?"text-blue-800 dark:text-blue-200":"text-green-800 dark:text-green-200"]])},u(r.title),3),a("p",{class:g(["text-xs mt-1",["warning"===r.type?"text-yellow-700 dark:text-yellow-300":"info"===r.type?"text-blue-700 dark:text-blue-300":"text-green-700 dark:text-green-300"]])},u(r.description),3),a("button",{class:g(["text-xs font-medium mt-2 underline",["warning"===r.type?"text-yellow-800 dark:text-yellow-200":"info"===r.type?"text-blue-800 dark:text-blue-200":"text-green-800 dark:text-green-200"]])},u(r.action),3)])])],2))),128))])):(t(),e("div",ot,[c(x(P),{class:"h-8 w-8 mx-auto mb-2 text-green-500"}),s[20]||(s[20]=a("div",{class:"text-sm"},"Configuration is optimized",-1))]))])])]),_.value?(t(),e("div",nt,[a("div",ct,[a("div",gt,[s[22]||(s[22]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Real-time Status",-1)),a("div",xt,[a("div",{class:g(["w-2 h-2 rounded-full","active"===_.value.status?"bg-green-500 animate-pulse":"bg-gray-400"])},null,2),a("span",ut,u(_.value.status),1)])])]),a("div",vt,[a("div",yt,[a("div",mt,[a("div",bt,u(_.value.active_sessions),1),s[23]||(s[23]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Active Sessions",-1))]),a("div",pt,[a("div",kt,u(_.value.verifications_per_minute.toFixed(1)),1),s[24]||(s[24]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Verifications/min",-1))]),a("div",ht,[a("div",ft,u((100*_.value.current_load).toFixed(0))+"%",1),s[25]||(s[25]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Current Load",-1))]),a("div",wt,[a("div",_t,u(I(_.value.last_activity)),1),s[26]||(s[26]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Last Activity",-1))])])])])):i("",!0)])):i("",!0)]);var d}}}),[["__scopeId","data-v-ea4b0109"]]),St={class:"space-y-6"},jt={key:0,class:"flex items-center justify-center py-12"},At={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},Ft={class:"flex"},It={class:"ml-3"},Tt={class:"text-sm text-red-700 dark:text-red-300 mt-1"},Mt={key:2},Dt={class:"flex items-start justify-between"},Lt={class:"flex items-center space-x-3"},Wt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ut={class:"flex items-center space-x-4 mt-1"},Vt=["href"],Pt={class:"flex items-center space-x-3"},zt=["disabled"],Et={class:"border-b border-gray-200 dark:border-gray-700"},Ht={class:"flex space-x-8","aria-label":"Tabs"},Rt=["onClick"],Nt={class:"mt-6"},$t={class:"space-y-6"},qt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Gt={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},Bt={class:"flex items-center"},Ot={class:"flex-shrink-0"},Xt={class:"ml-4"},Jt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Kt={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},Zt={class:"flex items-center"},Yt={class:"flex-shrink-0"},Qt={class:"ml-4"},ea={class:"text-2xl font-bold text-gray-900 dark:text-white"},ta={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},aa={class:"flex items-center"},ra={class:"flex-shrink-0"},sa={class:"ml-4"},da={class:"text-2xl font-bold text-gray-900 dark:text-white"},la={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4"},ia={class:"flex items-center"},oa={class:"flex-shrink-0"},na={class:"ml-4"},ca={class:"text-2xl font-bold text-gray-900 dark:text-white"},ga={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},xa={class:"p-4"},ua={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},va={class:"mt-1 text-sm text-gray-900 dark:text-white"},ya={class:"mt-1 text-sm text-gray-900 dark:text-white"},ma=["href"],ba={class:"mt-1"},pa={class:"mt-1 text-sm text-gray-900 dark:text-white"},ka={class:"mt-1"},ha={class:"flex items-center space-x-2"},fa={class:"text-sm text-gray-900 dark:text-white"},wa={key:1,class:"text-center py-12"},_a={class:"mt-6"},Ca={class:"space-y-6"},Sa={class:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700"},ja={class:"p-4"},Aa={class:"flex items-center justify-between pt-4"},Fa=["disabled"],Ia=["disabled"],Ta=r({__name:"page",setup(r){const l=p(),n=k(),v=s(null),T=s(!1),V=s(""),P=s("overview"),z=s(!1),q=s(!1),G=s(!1),B=s(!1),O=h({name:"",url:""}),X=[{id:"overview",name:"Overview",icon:F},{id:"analytics",name:"Script Analytics",icon:M},{id:"settings",name:"Settings",icon:$}],J=async()=>{const e=l.params.id;if(e){T.value=!0,V.value="";try{const t=await A.getWebsites(!0);if(!t.success)throw new Error(t.error?.message||"Failed to load website");{const a=t.data.websites.find(t=>t.id===e);a?(v.value=a,O.name=a.name,O.url=a.url):V.value="Website not found"}}catch(t){V.value=t.message||"Failed to load website"}finally{T.value=!1}}},K=async()=>{if(v.value){q.value=!0;try{const e=await A.toggleWebsiteStatus(v.value.id);if(!e.success)throw new Error(e.error?.message||"Failed to toggle website status");v.value=e.data.website}catch(e){V.value=e.message||"Failed to toggle website status"}finally{q.value=!1}}},Z=async()=>{if(v.value){G.value=!0;try{const e=await A.updateWebsite(v.value.id,{name:O.name,url:O.url});if(!e.success)throw new Error(e.error?.message||"Failed to update website");v.value=e.data.website}catch(e){V.value=e.message||"Failed to update website"}finally{G.value=!1}}},Y=async()=>{if(v.value&&confirm(`Are you sure you want to delete ${v.value.name}? This action cannot be undone.`)){B.value=!0;try{const e=await A.deleteWebsite(v.value.id);if(!e.success)throw new Error(e.error?.message||"Failed to delete website");n.push("/dashboard/websites")}catch(e){V.value=e.message||"Failed to delete website"}finally{B.value=!1}}},Q=e=>{v.value&&(v.value.has_script_token=!0,v.value.script_token_info=e.token),z.value=!1,P.value="analytics"},ee=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"inactive":default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";case"suspended":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"pending_integration":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},te=e=>{if(!e)return"Never";const t=new Date(e),a=new Date,r=Math.floor((a.getTime()-t.getTime())/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()};return d(()=>{J()}),f(()=>l.params.id,()=>{J()}),(r,s)=>{return t(),e("div",St,[T.value&&!v.value?(t(),e("div",jt,s[7]||(s[7]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-500 border-t-transparent"},null,-1)]))):V.value?(t(),e("div",At,[a("div",Ft,[c(x(W),{class:"h-5 w-5 text-red-400 flex-shrink-0"}),a("div",It,[s[8]||(s[8]=a("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"Error loading website",-1)),a("p",Tt,u(V.value),1)])])])):v.value?(t(),e("div",Mt,[a("div",Dt,[a("div",null,[a("div",Lt,[a("button",{onClick:s[0]||(s[0]=e=>r.$router.back()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[c(x(R),{class:"h-5 w-5"})]),a("div",null,[a("h1",Wt,u(v.value.name),1),a("div",Ut,[a("a",{href:v.value.url,target:"_blank",class:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200"},[w(u(v.value.url)+" ",1),c(x(N),{class:"h-4 w-4 inline ml-1"})],8,Vt),a("span",{class:g(["px-2 py-1 text-xs font-medium rounded-full",ee(v.value.status)])},u(v.value.status),3)])])])]),a("div",Pt,[a("button",{onClick:K,disabled:q.value,class:g(["px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50","active"===v.value.status?"text-red-700 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30":"text-green-700 bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30"])},u("active"===v.value.status?"Pause Protection":"Activate Protection"),11,zt),v.value.has_script_token?(t(),e("button",{key:1,onClick:s[2]||(s[2]=e=>z.value=!0),class:"px-4 py-2 text-sm font-medium text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg transition-colors"},[c(x(H),{class:"h-4 w-4 inline mr-2"}),s[10]||(s[10]=w(" Manage Script ",-1))])):(t(),e("button",{key:0,onClick:s[1]||(s[1]=e=>z.value=!0),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"},[c(x(E),{class:"h-4 w-4 inline mr-2"}),s[9]||(s[9]=w(" Generate Script ",-1))]))])]),a("div",Et,[a("nav",Ht,[(t(),e(y,null,m(X,e=>a("button",{key:e.id,onClick:t=>P.value=e.id,class:g([P.value===e.id?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2"])},[(t(),b(_(e.icon),{class:"h-5 w-5"})),a("span",null,u(e.name),1)],10,Rt)),64))])]),a("div",Nt,[o(a("div",$t,[a("div",qt,[a("div",Gt,[a("div",Bt,[a("div",Ot,[c(x(M),{class:"h-8 w-8 text-blue-500"})]),a("div",Xt,[a("div",Jt,u((d=v.value.totalVerifications||0,d>=1e6?(d/1e6).toFixed(1)+"M":d>=1e3?(d/1e3).toFixed(1)+"K":d.toString())),1),s[11]||(s[11]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Verifications",-1))])])]),a("div",Kt,[a("div",Zt,[a("div",Yt,[c(x(U),{class:"h-8 w-8 text-green-500"})]),a("div",Qt,[a("div",ea,u((v.value.humanRate||0).toFixed(1))+"% ",1),s[12]||(s[12]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Human Rate",-1))])])]),a("div",ta,[a("div",aa,[a("div",ra,[c(x(L),{class:"h-8 w-8 text-purple-500"})]),a("div",sa,[a("div",da,u((v.value.avgConfidence||0).toFixed(1))+"% ",1),s[13]||(s[13]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Avg Confidence",-1))])])]),a("div",la,[a("div",ia,[a("div",oa,[c(x(D),{class:"h-8 w-8 text-yellow-500"})]),a("div",na,[a("div",ca,u(te(v.value.lastActivity)),1),s[14]||(s[14]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Last Activity",-1))])])])]),a("div",ga,[s[20]||(s[20]=a("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Website Information")],-1)),a("div",xa,[a("dl",ua,[a("div",null,[s[15]||(s[15]=a("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Name",-1)),a("dd",va,u(v.value.name),1)]),a("div",null,[s[16]||(s[16]=a("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"URL",-1)),a("dd",ya,[a("a",{href:v.value.url,target:"_blank",class:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200"},u(v.value.url),9,ma)])]),a("div",null,[s[17]||(s[17]=a("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Status",-1)),a("dd",ba,[a("span",{class:g(["px-2 py-1 text-xs font-medium rounded-full",ee(v.value.status)])},u(v.value.status),3)])]),a("div",null,[s[18]||(s[18]=a("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Created",-1)),a("dd",pa,u(te(v.value.createdAt)),1)]),a("div",null,[s[19]||(s[19]=a("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Script Integration",-1)),a("dd",ka,[a("div",ha,[a("div",{class:g(["w-2 h-2 rounded-full",v.value.has_script_token?"bg-green-500":"bg-gray-400"])},null,2),a("span",fa,u(v.value.has_script_token?"Active":"Not configured"),1)])])])])])])],512),[[C,"overview"===P.value]]),o(a("div",null,[v.value.has_script_token?(t(),b(Ct,{key:0,"website-id":v.value.id},null,8,["website-id"])):(t(),e("div",wa,[c(x(E),{class:"mx-auto h-12 w-12 text-gray-400"}),s[22]||(s[22]=a("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"No script integration",-1)),s[23]||(s[23]=a("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Generate and integrate the Passive CAPTCHA script to view analytics. ",-1)),a("div",_a,[a("button",{onClick:s[3]||(s[3]=e=>z.value=!0),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"},[c(x(E),{class:"h-4 w-4 inline mr-2"}),s[21]||(s[21]=w(" Generate Script ",-1))])])]))],512),[[C,"analytics"===P.value]]),o(a("div",Ca,[a("div",Sa,[s[26]||(s[26]=a("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Website Settings")],-1)),a("div",ja,[a("form",{onSubmit:S(Z,["prevent"]),class:"space-y-4"},[a("div",null,[s[24]||(s[24]=a("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Website Name ",-1)),o(a("input",{id:"name","onUpdate:modelValue":s[4]||(s[4]=e=>O.name=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[j,O.name]])]),a("div",null,[s[25]||(s[25]=a("label",{for:"url",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Website URL ",-1)),o(a("input",{id:"url","onUpdate:modelValue":s[5]||(s[5]=e=>O.url=e),type:"url",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[j,O.url]])]),a("div",Aa,[a("button",{type:"submit",disabled:G.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50"},u(G.value?"Updating...":"Update Website"),9,Fa),a("button",{type:"button",onClick:Y,disabled:B.value,class:"px-4 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50"},u(B.value?"Deleting...":"Delete Website"),9,Ia)])],32)])])],512),[[C,"settings"===P.value]])])])):i("",!0),z.value?(t(),b(I,{key:3,website:v.value,onClose:s[6]||(s[6]=e=>z.value=!1),onSuccess:Q},null,8,["website"])):i("",!0)]);var d}}});export{Ta as default};
