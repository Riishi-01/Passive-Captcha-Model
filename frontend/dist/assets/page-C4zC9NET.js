import{r as e,b as t}from"./api-bDtdmj2A.js";import{A as a}from"./AddWebsiteModal-SipyNPo5.js";import{S as s}from"./ScriptGeneratorModal-DLfWyZ9u.js";import{r}from"./PlusIcon-BOykt2vW.js";import{c as i,a as d}from"./ShieldCheckIcon-1XaN3I0g.js";import{r as l}from"./ExclamationTriangleIcon-D2OrJjef.js";import{r as o,a as n}from"./CogIcon-DVePFGMK.js";import{r as c}from"./TrashIcon-mjK9sTid.js";import{d as g,r as u,W as x,N as m,B as b,e as y,D as v,q as p,j as f,p as k,G as h,s as w,u as j,f as C,t as _,F as A,z as F,l as S}from"./vendor-kbKO8dgQ.js";import"./utils-Bp8ce8Co.js";import"./XMarkIcon-7RSvE2BE.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./XCircleIcon-DhVsPiYz.js";const I={class:"space-y-6"},M={class:"sm:flex sm:items-center sm:justify-between"},T={class:"mt-4 sm:mt-0 flex space-x-3"},W=["disabled"],E={key:0,class:"flex items-center justify-center py-12"},G={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},D={class:"flex"},N={class:"ml-3"},$={class:"text-sm text-red-700 dark:text-red-300 mt-1"},z={key:2,class:"text-center py-12"},H={class:"mt-6"},P={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},V={class:"flex items-center justify-between"},q={class:"flex items-center space-x-2"},B={class:"text-lg font-medium text-gray-900 dark:text-white truncate"},L={class:"mt-2"},R=["href"],X={class:"mt-4 space-y-2"},J={class:"flex justify-between text-sm"},K={class:"font-medium text-gray-900 dark:text-white"},O={class:"flex justify-between text-sm"},Q={class:"font-medium text-gray-900 dark:text-white"},U={class:"flex justify-between text-sm"},Y={class:"font-medium text-gray-900 dark:text-white"},Z={class:"flex justify-between text-sm"},ee={class:"font-medium text-gray-900 dark:text-white"},te={class:"mt-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg"},ae={class:"flex items-center justify-between"},se={class:"flex items-center space-x-2"},re={class:"flex items-center space-x-1"},ie={class:"text-xs text-gray-500 dark:text-gray-400"},de={class:"mt-4 flex flex-col space-y-2"},le={class:"flex space-x-2"},oe=["onClick","disabled"],ne={class:"flex space-x-2"},ce=["onClick","disabled"],ge={key:0,class:"inline-flex items-center"},ue={key:1},xe=["onClick"],me=["onClick","disabled"],be=g({__name:"page",setup(g){const be=u([]),ye=u(!1),ve=u(""),pe=u(!1),fe=u(!1),ke=u(null),he=x({}),we=x({}),je=x({}),Ce=async()=>{ye.value=!0,ve.value="";try{const e=await t.getWebsites(!0);if(!e.success)throw new Error(e.error?.message||"Failed to load websites");be.value=e.data.websites||[]}catch(e){ve.value=e.message||"Failed to load websites"}finally{ye.value=!1}},_e=()=>{Ce()},Ae=e=>{be.value.push(e),pe.value=!1},Fe=e=>{if(ke.value){const t=be.value.findIndex(e=>e.id===ke.value.id);-1!==t&&(be.value[t].has_script_token=!0,be.value[t].script_token_info=e.token)}fe.value=!1},Se=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"inactive":default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";case"suspended":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"pending_integration":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},Ie=e=>{if(!e)return"Never";const t=new Date(e),a=new Date,s=Math.floor((a.getTime()-t.getTime())/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString()};return m(()=>{Ce()}),(g,u)=>{const x=b("router-link");return v(),y("div",I,[p("div",M,[u[5]||(u[5]=p("div",null,[p("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Websites "),p("p",{class:"text-gray-600 dark:text-gray-400 mt-1"}," Manage your websites and their passive CAPTCHA protection ")],-1)),p("div",T,[p("button",{onClick:u[0]||(u[0]=e=>pe.value=!0),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"},[h(j(r),{class:"h-4 w-4 inline mr-2"}),u[4]||(u[4]=w(" Add Website ",-1))]),p("button",{onClick:_e,disabled:ye.value,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors disabled:opacity-50"},[h(j(i),{class:C(["h-4 w-4",{"animate-spin":ye.value}])},null,8,["class"])],8,W)])]),ye.value&&0===be.value.length?(v(),y("div",E,u[6]||(u[6]=[p("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-500 border-t-transparent"},null,-1)]))):ve.value?(v(),y("div",G,[p("div",D,[h(j(l),{class:"h-5 w-5 text-red-400 flex-shrink-0"}),p("div",N,[u[7]||(u[7]=p("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"Error loading websites",-1)),p("p",$,_(ve.value),1)])])])):0===be.value.length?(v(),y("div",z,[h(j(e),{class:"mx-auto h-12 w-12 text-gray-400"}),u[9]||(u[9]=p("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"No websites",-1)),u[10]||(u[10]=p("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Get started by adding your first website.",-1)),p("div",H,[p("button",{onClick:u[1]||(u[1]=e=>pe.value=!0),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"},[h(j(r),{class:"h-4 w-4 inline mr-2"}),u[8]||(u[8]=w(" Add your first website ",-1))])])])):(v(),y("div",P,[(v(!0),y(A,null,F(be.value,a=>{return v(),y("div",{key:a.id,class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow"},[p("div",V,[p("div",q,[h(j(e),{class:"h-5 w-5 text-gray-400"}),p("h3",B,_(a.name),1)]),p("span",{class:C(["px-2 py-1 text-xs font-medium rounded-full",Se(a.status)])},_(a.status),3)]),p("div",L,[p("a",{href:a.url,target:"_blank",class:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 truncate block"},_(a.url),9,R)]),p("div",X,[p("div",J,[u[11]||(u[11]=p("span",{class:"text-gray-500 dark:text-gray-400"},"Total Verifications:",-1)),p("span",K,_((s=a.totalVerifications||0,s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString())),1)]),p("div",O,[u[12]||(u[12]=p("span",{class:"text-gray-500 dark:text-gray-400"},"Human Rate:",-1)),p("span",Q,_((a.humanRate||0).toFixed(1))+"% ",1)]),p("div",U,[u[13]||(u[13]=p("span",{class:"text-gray-500 dark:text-gray-400"},"Avg Confidence:",-1)),p("span",Y,_((a.avgConfidence||0).toFixed(1))+"% ",1)]),p("div",Z,[u[14]||(u[14]=p("span",{class:"text-gray-500 dark:text-gray-400"},"Last Activity:",-1)),p("span",ee,_(Ie(a.lastActivity)),1)])]),p("div",te,[p("div",ae,[p("div",se,[h(j(o),{class:"h-4 w-4 text-gray-400"}),u[15]||(u[15]=p("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Script Integration",-1))]),p("div",re,[p("div",{class:C(["w-2 h-2 rounded-full",a.has_script_token?"bg-green-500":"bg-gray-400"])},null,2),p("span",ie,_(a.has_script_token?"Active":"Not configured"),1)])])]),p("div",de,[p("div",le,[h(x,{to:`/dashboard/websites/${a.id}`,class:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 flex-1 text-center transition-colors"},{default:S(()=>[h(j(d),{class:"h-4 w-4 inline mr-1"}),u[16]||(u[16]=w(" Analytics ",-1))]),_:2,__:[16]},1032,["to"]),p("button",{onClick:e=>(async e=>{he[e.id]=!0;try{const a=await t.toggleWebsiteStatus(e.id);if(!a.success)throw new Error(a.error?.message||"Failed to toggle website status");{const t=a.data.website,s=be.value.findIndex(t=>t.id===e.id);-1!==s&&(be.value[s]=t)}}catch(a){ve.value=a.message||"Failed to toggle website status"}finally{he[e.id]=!1}})(a),disabled:he[a.id],class:C(["px-3 py-2 text-sm font-medium rounded-md transition-colors disabled:opacity-50","active"===a.status?"text-red-700 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30":"text-green-700 bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30"])},_("active"===a.status?"Pause":"Activate"),11,oe)]),p("div",ne,[a.has_script_token?(v(),y("button",{key:1,onClick:e=>(e=>{ke.value=e,fe.value=!0})(a),class:"px-3 py-2 text-sm font-medium text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-md flex-1 transition-colors"},[h(j(n),{class:"h-4 w-4 inline mr-1"}),u[19]||(u[19]=w(" Manage Script ",-1))],8,xe)):(v(),y("button",{key:0,onClick:e=>(async e=>{ke.value=e,fe.value=!0})(a),disabled:we[a.id],class:"px-3 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md flex-1 transition-colors disabled:opacity-50"},[we[a.id]?(v(),y("span",ge,u[17]||(u[17]=[p("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Generating... ",-1)]))):(v(),y("span",ue,[h(j(o),{class:"h-4 w-4 inline mr-1"}),u[18]||(u[18]=w(" Generate Script ",-1))]))],8,ce)),p("button",{onClick:e=>(async e=>{if(confirm(`Are you sure you want to delete ${e.name}? This action cannot be undone.`)){je[e.id]=!0;try{const a=await t.deleteWebsite(e.id);if(!a.success)throw new Error(a.error?.message||"Failed to delete website");be.value=be.value.filter(t=>t.id!==e.id)}catch(a){ve.value=a.message||"Failed to delete website"}finally{je[e.id]=!1}}})(a),disabled:je[a.id],class:"px-3 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-md transition-colors disabled:opacity-50"},[h(j(c),{class:"h-4 w-4"})],8,me)])])]);var s}),128))])),pe.value?(v(),f(a,{key:4,onClose:u[2]||(u[2]=e=>pe.value=!1),onSuccess:Ae})):k("",!0),fe.value?(v(),f(s,{key:5,website:ke.value,onClose:u[3]||(u[3]=e=>fe.value=!1),onSuccess:Fe},null,8,["website"])):k("",!0)])}}});export{be as default};
