import{H as e,r as t,I as a,d as s,W as i,N as l,a as r,B as d,e as o,D as n,q as c,G as u,l as m,s as v,t as b,f as g,M as x}from"./vendor-BIO1jeMb.js";import{a as y}from"./utils-Bp8ce8Co.js";const w=e("websites",()=>{const e=t([]),s=t([]),i=t(null),l=t(!1),r=t(""),d="http://localhost:5003",o=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("admin_token")}`,"Content-Type":"application/json"}}),n=a(()=>e.value.filter(e=>"active"===e.status).length),c=a(()=>e.value.reduce((e,t)=>e+(t.totalVerifications||0),0));return{websites:e,activeWebsites:s,currentWebsite:i,isLoading:l,error:r,activeWebsiteCount:n,totalVerifications:c,fetchWebsites:async()=>{l.value=!0,r.value="";try{const t=await y.get(`${d}/admin/websites`,o());e.value=t.data.websites||[]}catch(t){r.value=t.response?.data?.message||"Failed to fetch websites",console.error("Failed to fetch websites:",t)}finally{l.value=!1}},fetchActiveWebsites:async()=>{try{const e=await y.get(`${d}/admin/websites?status=active&limit=5`,o());s.value=e.data.websites||[]}catch(e){console.error("Failed to fetch active websites:",e),s.value=[{id:1,domain:"example.com",status:"active",totalVerifications:1543,humanRate:85.7,lastActivity:(new Date).toISOString()},{id:2,domain:"demo.site",status:"active",totalVerifications:892,humanRate:78.3,lastActivity:(new Date).toISOString()}]}},fetchWebsite:async e=>{l.value=!0,r.value="";try{const t=await y.get(`${d}/admin/websites/${e}`,o());return i.value=t.data.website,t.data.website}catch(t){throw r.value=t.response?.data?.message||"Failed to fetch website",console.error("Failed to fetch website:",t),t}finally{l.value=!1}},addWebsite:async t=>{l.value=!0,r.value="";try{const a=(await y.post(`${d}/admin/websites`,t,o())).data.website;return e.value.unshift(a),a}catch(a){throw r.value=a.response?.data?.message||"Failed to add website",console.error("Failed to add website:",a),a}finally{l.value=!1}},updateWebsite:async(t,a)=>{l.value=!0,r.value="";try{const s=(await y.patch(`${d}/admin/websites/${t}`,a,o())).data.website,l=e.value.findIndex(e=>e.id===t);return-1!==l&&(e.value[l]=s),i.value?.id===t&&(i.value=s),s}catch(s){throw r.value=s.response?.data?.message||"Failed to update website",console.error("Failed to update website:",s),s}finally{l.value=!1}},deleteWebsite:async t=>{l.value=!0,r.value="";try{await y.delete(`${d}/admin/websites/${t}`,o()),e.value=e.value.filter(e=>e.id!==t),i.value?.id===t&&(i.value=null)}catch(a){throw r.value=a.response?.data?.message||"Failed to delete website",console.error("Failed to delete website:",a),a}finally{l.value=!1}}}}),h={class:"space-y-6"},f={class:"flex","aria-label":"Breadcrumb"},p={class:"flex items-center space-x-4"},k={class:"text-gray-500"},W={class:"sm:flex sm:items-center sm:justify-between"},F={class:"text-2xl font-bold text-gray-900 dark:text-white"},$={key:0,class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},D={class:"mt-1 text-sm text-gray-900 dark:text-white"},B={class:"mt-1"},I={class:"mt-1 text-sm text-gray-900 dark:text-white"},L={class:"mt-1 text-sm text-gray-900 dark:text-white"},S={key:1,class:"text-center py-12"},V={key:2,class:"text-center py-12"},j={class:"mt-6"},A=s({__name:"page",setup(e){const t=i(),s=w(),y=a(()=>s.currentWebsite),A=a(()=>s.isLoading),C=async()=>{const e=t.params.id;if(e)try{await s.fetchWebsite(e)}catch(a){console.error("Failed to load website:",a)}};return l(C),r(()=>t.params.id,C),(e,t)=>{const a=d("router-link");return n(),o("div",h,[c("nav",f,[c("ol",p,[c("li",null,[u(a,{to:"/dashboard/websites",class:"text-gray-400 hover:text-gray-500"},{default:m(()=>t[0]||(t[0]=[v(" Websites ",-1)])),_:1,__:[0]})]),t[1]||(t[1]=c("li",null,[c("svg",{class:"flex-shrink-0 h-5 w-5 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])],-1)),c("li",null,[c("span",k,b(y.value?.domain||"Website Details"),1)])])]),c("div",W,[c("div",null,[c("h1",F,b(y.value?.domain||"Website Details"),1),t[2]||(t[2]=c("p",{class:"text-gray-600 dark:text-gray-400 mt-1"}," Detailed analytics and settings for this website ",-1))])]),y.value?(n(),o("div",$,[t[7]||(t[7]=c("h2",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Website Information",-1)),c("div",_,[c("div",null,[t[3]||(t[3]=c("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Domain",-1)),c("dd",D,b(y.value.domain),1)]),c("div",null,[t[4]||(t[4]=c("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Status",-1)),c("dd",B,[c("span",{class:g(["px-2 py-1 text-xs font-medium rounded-full","active"===y.value.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},b(y.value.status),3)])]),c("div",null,[t[5]||(t[5]=c("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Verifications",-1)),c("dd",I,b(y.value.totalVerifications),1)]),c("div",null,[t[6]||(t[6]=c("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Human Rate",-1)),c("dd",L,b(y.value.humanRate)+"%",1)])])])):A.value?(n(),o("div",S,t[8]||(t[8]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"},null,-1),c("p",{class:"mt-2 text-sm text-gray-500"},"Loading website details...",-1)]))):(n(),o("div",V,[t[10]||(t[10]=x('<div class="mx-auto h-12 w-12 text-red-400"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">Website not found</h3><p class="mt-1 text-sm text-gray-500 dark:text-gray-400">The website you&#39;re looking for doesn&#39;t exist.</p>',3)),c("div",j,[u(a,{to:"/dashboard/websites",class:"btn btn-outline"},{default:m(()=>t[9]||(t[9]=[v(" Back to Websites ",-1)])),_:1,__:[9]})])]))])}}});export{A as default};
